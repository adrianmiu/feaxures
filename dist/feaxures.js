/*
 - MIT http://opensource.org/licenses/MIT
 @copyright - Adrian Miu www.adrianmiu.ro
*/
(function(q,r){console.log(arguments);"function"===typeof define&&define.T?define("feaxures",function(){q.r=r();return q.r}):q.r=r()})(this,function(){function q(a){this.d={};this.a={};this.h={};this.t(a);return this}function r(a,b){var c=String(a).replace(/^&/,"").replace(/&$/,"").split("&"),d=c.length,f,h,g,e,l,k,m,n,p;b||(b=this.window);for(f=0;f<d;f++){h=c[f].split("=");g=decodeURIComponent(h[0].replace(/\+/g,"%20"));m=2>h.length?"":decodeURIComponent(h[1].replace(/\+/g,"%20"));for("true"===m?
m=!0:"false"===m?m=!1:m==parseInt(m,10)?m=parseInt(m,10):m==parseFloat(m)&&(m=parseFloat(m));" "===g.charAt(0);)g=g.slice(1);-1<g.indexOf("\x00")&&(g=g.slice(0,g.indexOf("\x00")));if(g&&"["!==g.charAt(0)){n=[];for(h=k=0;h<g.length;h++)if("["===g.charAt(h)&&!k)k=h+1;else if("]"===g.charAt(h)&&k&&(n.length||n.push(g.slice(0,k-1)),n.push(g.substr(k,h-k)),k=0,"["!==g.charAt(h+1)))break;n.length||(n=[g]);for(h=0;h<n[0].length;h++){k=n[0].charAt(h);if(" "===k||"."===k||"["===k)n[0]=n[0].substr(0,h)+"_"+
n[0].substr(h+1);if("["===k)break}k=b;h=0;for(p=n.length;h<p;h++)if(g=n[h].replace(/^['"]/,"").replace(/['"]$/,""),l=k,""!==g&&" "!==g||0===h)void 0===k[g]&&(k[g]={}),k=k[g];else{g=-1;for(e in k)k.hasOwnProperty(e)&&+e>g&&e.match(/^\d+$/g)&&(g=+e);g+=1}l[g]=m}}}function s(a){p(x.call(arguments,1),function(b){if(b)for(var c in b)a[c]=b[c]});return a}function y(a){(a=t(a))&&(window.execScript||function(a){window.eval.call(window,a)})(a)}function t(a){return u.trim?u.trim.call(a):a.replace(/^\s\s*/,
"").replace(/\s\s*$/,"")}function p(a,b){if(null!=a)if(v&&a.forEach===v)a.forEach(b,void 0);else if(a.length===+a.length)for(var c=0,d=a.length;c<d&&b.call(void 0,a[c],c,a)!=={};c++);else for(c in a)if(z.hasOwnProperty.call(a,c)&&b.call(void 0,a[c],c,a)==={})break}var u=String.prototype,l=Array.prototype,z=Object.prototype,x=l.slice,v=l.forEach,e=window.aa,A=Array.isArray||function(a){return"[object Array]"==toString.call(a)},w;e&&e.B&&(w=function(){function a(a){return b[a]||(b[a]=e.B("unique stopOnFalse"))}
var b={};this.f=function(c,b){a(c).add(b);return this};this.P=function(a,b){function f(){h.q(a,f);return b.apply(this,arguments)}var h=this;this.f(a,f)};this.q=function(c,b){a(c).remove(b);return this};this.c=function(c){return a(c).Y(this,[].slice.call(arguments))}});var f={};f.K=window.ca;f.j=e?e.j:null;f.H=e?function(a){e(a)}:null;f.e=e?function(a,b){return e(a,b)}:null;f.w=e?function(a,b){return e(a).U(b)}:null;f.getData=e?function(a,b){return e.data(a,b)}:null;f.setData=e?function(a,b,c){return e.data(a,
b,c)}:null;f.n=e?function(a,b,c){return e(a).f(b,c)}:null;f.Q=e?function(a,b,c){return e(a).q(b,c)}:null;f.A=e?function(a,b,c){return e(a).c(b,c)}:null;f.G=e?function(a,b,c){return e(a).f(b,c)}:null;f.R=e?function(a,b,c){return e(a).q(b,c)}:null;f.C=w;f=s(f,window.D||{});console.log(f,window.D);l=q.prototype;f.C.call(l);l.t=function(a){if("string"==typeof a){if(1===arguments.length)return this.h[a]||!1;this.h[a]=arguments[1]}else{if(void 0===a)return this.h;this.h=s(this.h,a)}return this};l.log=function(){this.t("debug")&&
"function"==typeof console.log&&console.log.apply(console,arguments)};l.J=function(a){return a&&this.a[a]?!0:!1};l.ba=function(a,b){b=s({autoLoad:!1,selector:"[data-fxr-"+a+"]",files:[],defaults:{},attachEvent:"domready",attachCondition:!0,detach:null,onLoad:null,onLoadError:null,onAttach:null,onDetach:null},b,{name:a});"function"===typeof b.N&&this.f("load:"+a,b.N);"function"===typeof b.O&&this.f("loadError:"+a,b.O);"function"===typeof b.L&&this.f("attach:"+a,b.L);"function"===typeof b.M&&this.f("detach:"+
a,b.M);this.a[a]=b};l.$=function(a){return this.d[a]?!0:!1};l.load=function(a,b){var c=this,d=new f.j;if(!this.J(a))return this.log("Feaxure "+a+" is not registered"),d.l(c,["Feaxure "+a+" is not registered"]),d.b();var e=this.a[a];"function"===typeof e.files&&(e.files=e.files.call(this));if(!A(e.files))return this.log('The feaxure "'+a+'" does not have a valid list of dependencies'),d.l(c,['The feaxure "'+a+'" does not have a valid list of dependencies']),d.b();"function"===typeof b&&d.k(b);if(!0===
this.d[a])return d.m(c),d.b();if(!1===this.d[a])return d.l(c),d.b();d.k(function(){if(!0!==this.d[a]){this.d[a]=!0;c.log("Feaxure "+a+" was loaded");var b={o:a};c.c("load",b);c.c("load:"+a,b)}});d.I(function(){if(!1!==this.d[a]){this.d[a]=!1;c.log("Error loading feaxure "+a);var b={o:a};c.c("loadError",b);c.c("loadError:"+a,b)}});f.K(e.files,function(){d.m(c,["Feaxure "+a+" was loaded"])},function(b){c.log("Error loading feaxure "+a,b);d.l(c,[b])});return d.b()};l.s=function(a,b){var c=this;$(b);
var d=this.a[a],e=!1;if(e="function"===typeof d.i&&"function"===typeof d.detach&&!1==d.i.call(d,b))d.detach.call(this,b),f.setData(b,"fxr."+a,null),this.log("Feaxure "+a+" was applied to element",b),f.Q("body","dom:changed",function(){c.s(a,b)}),d={o:a,element:b},this.c("detach:"+a,d),this.c("detach",d)};l.F=function(a,b){var c=this,d=this.a[a],e="function"===typeof d.u?d.u.call(c,b):d.u,h=f.w(b,"data-fxr-"+a);if(null===f.getData(b,"fxr."+a)||void 0===f.getData(b,"fxr."+a)){var h="function"===typeof d.i?
d.i.call(d,b):d.i,g="function"===typeof d.i&&"function"===typeof d.detach;h&&(h=this.p(a,b),!1!==h&&(h=s({},e,h),d.g.call(this,b,h),f.setData(b,"fxr."+a,h),this.log("Feaxure "+a+" was applied to element",b),g&&f.n("body","dom:changed",function(){c.s(a,b)}),d={o:a,element:b,options:h},this.c("attach:"+a,d),this.c("attach",d)))}};l.g=function(a,b){var c=this,d=this.a[a],e=0,h=this.load(a),g=new f.j;if(!d.g||"function"!==typeof d.g)return g.I(function(a){c.log(a)}),g.l(c,['Feaxure "'+a+'" does not have an attach() method.']),
g.b();if(!b.length||1>b.length)return g.k(function(a){c.log(a)}),g.da('Feaxure "'+a+'" has no elements to be applied to.'),g.b();p(b,function(b){!1!==c.p(a,b)&&e++});if(0===e)return g.k(function(a){c.log(a)}),g.m(c,['Feaxure "'+a+'" has no elements to be applied to.']),g.b();h.k(function(){p(b,function(b){c.F(a,b)});g.m(c,[{W:a}])});return g.b()};l.p=function(a,b){var c=f.w(b,"data-fxr-"+a);if("false"===c)return!1;if("true"===c||""===c)return{};"#"==c.substr(0,1)&&(c=f.e(c).text());c=t(c);if("{"==
c.substr(0,1))eval("o = "+c+";"),c={};else if("function"==c.substr(0,8)){var d="_tmpFunc"+Math.floor(1E6*Math.random());y("var "+d+" = "+c);if("function"!==typeof window[d])return self.log("value could not be converted into a function: "+c),!1;c=window[d].call(null,b);window[d]=void 0;delete window[d]}else d={},r(c,d),c=d;return c};l.v=function(){var a="body",b=this,c=0,d=0,e=new f.j;"string"===typeof a&&(a=f.e(a));p(this.a,function(a){"domready"===a.attachEvent&&c++});p(this.a,function(h,g){"domready"===
h.attachEvent&&b.g(g,f.e(h.e,a)).S(function(){d++;d===c&&e.m(b,[{X:d}])})});e.b()};l.Z=function(){var a=this;p(this.a,function(b,c){!0!==c.V||a.d[c.name]||a.load(c.name)});f.H(function(){a.v();f.n("body","dom:changed",function(){a.v()});f.n(window,"resize",function(){f.A("body","dom:changed")});var b=["click","focus","mouseover"],c;p(a.a,function(d,e){-1!==b.indexOf(evt)&&(c=function(b){if(!1!==a.p(d,b.currentTarget)){b.stopPropagation();b.preventDefault();var g=f.e(e.e);a.g(d,b.currentTarget);a.P("attach:"+
d,function(){f.R("body",evt+".feaxures",e.e,c);f.A(b.target,evt);a.g(d,g)})}},f.G("body",evt+".feaxures",e.e,c))})});return this};return q});