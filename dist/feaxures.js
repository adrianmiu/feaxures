/*
 - MIT http://opensource.org/licenses/MIT
 @copyright - Adrian Miu www.adrianmiu.ro
*/
(function(q,r){"function"===typeof define&&define.T?define("feaxures",function(){q.r=r();return q.r}):q.r=r()})(this,function(){function q(a){this.d={};this.a={};this.h={};this.t(a);this.H();return this}function r(a,b){var c=String(a).replace(/^&/,"").replace(/&$/,"").split("&"),d=c.length,h,g,f,e,l,k,m,n,p;b||(b=this.window);for(h=0;h<d;h++){g=c[h].split("=");f=decodeURIComponent(g[0].replace(/\+/g,"%20"));m=2>g.length?"":decodeURIComponent(g[1].replace(/\+/g,"%20"));for("true"===m?m=!0:"false"===
m?m=!1:m==parseInt(m,10)?m=parseInt(m,10):m==parseFloat(m)&&(m=parseFloat(m));" "===f.charAt(0);)f=f.slice(1);-1<f.indexOf("\x00")&&(f=f.slice(0,f.indexOf("\x00")));if(f&&"["!==f.charAt(0)){n=[];for(g=k=0;g<f.length;g++)if("["===f.charAt(g)&&!k)k=g+1;else if("]"===f.charAt(g)&&k&&(n.length||n.push(f.slice(0,k-1)),n.push(f.substr(k,g-k)),k=0,"["!==f.charAt(g+1)))break;n.length||(n=[f]);for(g=0;g<n[0].length;g++){k=n[0].charAt(g);if(" "===k||"."===k||"["===k)n[0]=n[0].substr(0,g)+"_"+n[0].substr(g+
1);if("["===k)break}k=b;g=0;for(p=n.length;g<p;g++)if(f=n[g].replace(/^['"]/,"").replace(/['"]$/,""),l=k,""!==f&&" "!==f||0===g)void 0===k[f]&&(k[f]={}),k=k[f];else{f=-1;for(e in k)k.hasOwnProperty(e)&&+e>f&&e.match(/^\d+$/g)&&(f=+e);f+=1}l[f]=m}}}function t(a,b,c){a&&(a.nodeType&&b)&&(a[b]=c)}function s(a){p(y.call(arguments,1),function(b){if(b)for(var c in b)a[c]=b[c]});return a}function z(a){(a=u(a))&&(window.execScript||function(a){window.eval.call(window,a)})(a)}function u(a){return v.trim?v.trim.call(a):
a.replace(/^\s\s*/,"").replace(/\s\s*$/,"")}function p(a,b){if(null!==a)if(w&&a.forEach===w)a.forEach(b,void 0);else if(a.length===+a.length)for(var c=0,d=a.length;c<d&&b.call(void 0,a[c],c,a)!=={};c++);else for(c in a)if(A.hasOwnProperty.call(a,c)&&b.call(void 0,a[c],c,a)==={})break}var v=String.prototype,l=Array.prototype,A=Object.prototype,y=l.slice,w=l.forEach,e=window.Z,B=Array.isArray||function(a){return"[object Array]"==toString.call(a)},x;e&&e.A&&(x=function(){function a(a){return b[a]||(b[a]=
e.A("unique stopOnFalse"))}var b={};this.f=function(c,b){a(c).add(b);return this};this.O=function(a,b){function h(){g.q(a,h);return b.apply(this,arguments)}var g=this;this.f(a,h)};this.q=function(b,d){a(b).remove(d);return this};this.c=function(b){return a(b).X(this,[].slice.call(arguments))}});var h={};h.J=window.aa;h.j=e?e.j:null;h.F=e?function(a){e(a)}:null;h.e=e?function(a,b){return e(a,b)}:null;h.n=e?function(a,b,c){return e(a).f(b,c)}:null;h.P=e?function(a,b,c){return e(a).q(b,c)}:null;h.w=
e?function(a,b,c){return e(a).c(b,c)}:null;h.D=e?function(a,b,c){return e(a).f(b,c)}:null;h.Q=e?function(a,b,c){return e(a).q(b,c)}:null;h.B=x;h=s(h,window.R||{});l=q.prototype;h.B.call(l);l.t=function(a){if("string"==typeof a){if(1===arguments.length)return this.h[a]||!1;this.h[a]=arguments[1]}else{if(void 0===a)return this.h;this.h=s(this.h,a)}return this};l.log=function(){this.t("debug")&&"function"==typeof console.log&&console.log.apply(console,arguments)};l.I=function(a){return a&&this.a[a]?
!0:!1};l.$=function(a,b){b=s({autoLoad:!1,selector:"[data-fxr-"+a+"]",files:[],defaults:{},attachEvent:"domready",attachCondition:!0,detach:null,onLoad:null,onLoadError:null,onAttach:null,onDetach:null},b,{name:a});"function"===typeof b.M&&this.f("load:"+a,b.M);"function"===typeof b.N&&this.f("loadError:"+a,b.N);"function"===typeof b.K&&this.f("attach:"+a,b.K);"function"===typeof b.L&&this.f("detach:"+a,b.L);this.a[a]=b};l.Y=function(a){return this.d[a]?!0:!1};l.load=function(a,b){var c=this,d=new h.j;
if(!this.I(a))return this.log("Feaxure "+a+" is not registered"),d.l(c,["Feaxure "+a+" is not registered"]),d.b();var e=this.a[a];"function"===typeof e.files&&(e.files=e.files.call(this));if(!B(e.files))return this.log('The feaxure "'+a+'" does not have a valid list of dependencies'),d.l(c,['The feaxure "'+a+'" does not have a valid list of dependencies']),d.b();"function"===typeof b&&d.k(b);if(!0===this.d[a])return d.m(c),d.b();if(!1===this.d[a])return d.l(c),d.b();d.k(function(){if(!0!==this.d[a]){this.d[a]=
!0;c.log("Feaxure "+a+" was loaded");var b={o:a};c.c("load",b);c.c("load:"+a,b)}});d.G(function(){if(!1!==this.d[a]){this.d[a]=!1;c.log("Error loading feaxure "+a);var b={o:a};c.c("loadError",b);c.c("loadError:"+a,b)}});h.J(e.files,function(){d.m(c,["Feaxure "+a+" was loaded"])},function(b){c.log("Error loading feaxure "+a,b);d.l(c,[b])});return d.b()};l.s=function(a,b){var c=this;$(b);var d=this.a[a],e=!1;if(e="function"===typeof d.i&&"function"===typeof d.detach&&!1==d.i.call(d,b))d.detach.call(this,
b),t(b,"fxr."+a,null),this.log("Feaxure "+a+" was applied to element",b),h.P("body","dom:changed",function(){c.s(a,b)}),d={o:a,element:b},this.c("detach:"+a,d),this.c("detach",d)};l.C=function(a,b){var c=this,d=this.a[a],e="function"===typeof d.u?d.u.call(c,b):d.u,g=b&&b.nodeType&&"data-fxr-"+a?b.getAttribute("data-fxr-"+a):null;if(null===(b&&b.nodeType&&"fxr."+a?b["fxr."+a]||null:null)||void 0===(b&&b.nodeType&&"fxr."+a?b["fxr."+a]||null:null)){var g="function"===typeof d.i?d.i.call(d,b):d.i,f="function"===
typeof d.i&&"function"===typeof d.detach;g&&(g=this.p(a,b),!1!==g&&(g=s({},e,g),d.g.call(this,b,g),t(b,"fxr."+a,g),this.log("Feaxure "+a+" was applied to element",b),f&&h.n("body","dom:changed",function(){c.s(a,b)}),d={o:a,element:b,options:g},this.c("attach:"+a,d),this.c("attach",d)))}};l.g=function(a,b){var c=this,d=this.a[a],e=0,g=this.load(a),f=new h.j;if(!d.g||"function"!==typeof d.g)return f.G(function(a){c.log(a)}),f.l(c,['Feaxure "'+a+'" does not have an attach() method.']),f.b();if(!b.length||
1>b.length)return f.k(function(a){c.log(a)}),f.ba('Feaxure "'+a+'" has no elements to be applied to.'),f.b();p(b,function(b){!1!==c.p(a,b)&&e++});if(0===e)return f.k(function(a){c.log(a)}),f.m(c,['Feaxure "'+a+'" has no elements to be applied to.']),f.b();g.k(function(){p(b,function(b){c.C(a,b)});f.m(c,[{V:a}])});return f.b()};l.p=function(a,b){var c=b&&b.nodeType&&"data-fxr-"+a?b.getAttribute("data-fxr-"+a):null;if("false"===c)return!1;if("true"===c||""===c)return{};"#"==c.substr(0,1)&&(c=h.e(c).text());
c=u(c);if("{"==c.substr(0,1))eval("o = "+c+";"),c={};else if("function"==c.substr(0,8)){var d="_tmpFunc"+Math.floor(1E6*Math.random());z("var "+d+" = "+c);if("function"!==typeof window[d])return self.log("value could not be converted into a function: "+c),!1;c=window[d].call(null,b);window[d]=void 0;delete window[d]}else d={},r(c,d),c=d;return c};l.v=function(){var a="body",b=this,c=0,d=0,e=new h.j;"string"===typeof a&&(a=h.e(a));p(this.a,function(a){"domready"===a.attachEvent&&c++});p(this.a,function(g,
f){"domready"===g.attachEvent&&b.g(f,h.e(g.e,a)).S(function(){d++;d===c&&e.m(b,[{W:d}])})});e.b()};l.H=function(){var a=this;p(this.a,function(b,c){!0!==c.U||a.d[c.name]||a.load(c.name)});h.F(function(){a.v();h.n("body","dom:changed",function(){a.v()});h.n(window,"resize",function(){h.w("body","dom:changed")});var b=["click","focus","mouseover"],c;p(a.a,function(d,e){if(-1!==b.indexOf(d.attachEvent)){var g=d.attachEvent;c=function(b){if(!1!==a.p(e,b.target)){b.stopPropagation();b.preventDefault();
var l=h.e(d.e);a.g(e,[b.target]);a.O("attach:"+e,function(){h.Q("body",g+".feaxures",d.e,c);h.w(b.target,g);a.g(e,l)})}};h.D("body",g+".feaxures",d.e,c)}})})};return q});